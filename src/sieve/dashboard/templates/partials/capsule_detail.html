<div class="detail-card">
    <div class="detail-header">
        <span class="detail-category">{{ capsule.category }}</span>
        <span class="detail-date">{{ capsule.captured_at }}</span>
    </div>

    <form
        hx-post="/capsule/{{ capsule._filename }}/edit"
        hx-target="closest div"
        hx-swap="outerHTML"
    >
        <div class="form-group">
            <label class="form-label">Title</label>
            <input
                type="text"
                name="title"
                value="{{ capsule.title }}"
                class="form-input"
            >
        </div>

        <div class="form-group">
            <label class="form-label">Tags</label>
            <input
                type="text"
                name="tags"
                value="{{ capsule.tags | join(', ') }}"
                class="form-input"
                placeholder="tag1, tag2, tag3"
            >
        </div>

        <button type="submit" class="btn-primary">
            Save Changes
        </button>
    </form>

    <div class="divider"></div>

    <div class="preview-section">
        <label class="form-label">Content Preview</label>
        <div class="preview-content">
            {{ capsule._content[:500] }}{% if capsule._content|length > 500 %}...{% endif %}
        </div>
    </div>

    {% if capsule.source_url %}
    <a href="{{ capsule.source_url }}" target="_blank" class="source-link">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
        </svg>
        View original source
    </a>
    {% endif %}
</div>
